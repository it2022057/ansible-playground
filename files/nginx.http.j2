server {
    listen 80;
    client_max_body_size 4G;

    server_name {{public_ip}};

    location / {      
      proxy_pass http://localhost:{{app_port}};
      proxy_set_header Host $http_host;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header X-Forwarded-Proto $scheme;
      proxy_redirect off;
      proxy_buffering off;
    }

    # location /mailhog/ {
    #   proxy_pass http://localhost:{{mailhog_ui_port}}/;
    #   proxy_set_header Host $host;
    #   proxy_set_header X-Real-IP $remote_addr;
    #   proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; 
    # }

    # location /minio/ {
    #   proxy_pass http://localhost:{{minio_console_port}}/;  # MinIO Console port
    #   proxy_set_header Host $host;
    #   proxy_set_header X-Real-IP $remote_addr;
    #   proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

    #   proxy_http_version 1.1;
    # 	proxy_set_header Upgrade $http_upgrade;
    # 	proxy_set_header Connection "upgrade";

    #   # Redirects to the exact path i proxy from (tricks MinIO Console)
    #   rewrite ^/minio/(.*)$ /$1 break;

    #   # Rewrite content (e.g. HTML, JS) so that internal redirects donâ€™t go to /
    #   # This ensures that href="/xyz" becomes href="/minio/xyz"
    #   sub_filter_types text/html text/javascript application/javascript;
    #   sub_filter_once off;
    #   sub_filter 'href="/' 'href="/minio/';
    #   sub_filter 'src="/' 'src="/minio/';
    # }

}

